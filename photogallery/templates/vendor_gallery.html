{% extends 'base.html' %}

{% block content %}
<div class="container py-4">
  {% if selected_category %}
  <div class="mb-4">
    <h2 class="vendor-gallery">{{ selected_category.Name }} Photography</h2>
    <p class="lead">{{ selected_category.Descriptions }}</p>
  </div>
  {% else %}
  <h2 class="vendor-gallery mb-5">Photographers Portfolio</h2>
  {% endif %}

  {% for data in photographer_data %}
  <div class="row align-items-start g-4 mb-5">
    <div class="col-md-5">
      <div id="carousel{{ data.photographer.PhotographerID }}" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          {% for image_file in data.image_files %}
          <div class="carousel-item {% if loop.first %}active{% endif %}">
            <img src="{{ url_for('static', filename='img/' + image_file) }}" class="d-block w-100 carousel-img" alt="{{ data.photographer.FullName }}">
          </div>
          {% endfor %}
        </div>

        {% if data.image_files|length > 1 %}
        <button class="carousel-control-prev" type="button" data-bs-target="#carousel{{ data.photographer.PhotographerID }}" data-bs-slide="prev">
          <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carousel{{ data.photographer.PhotographerID }}" data-bs-slide="next">
          <span class="carousel-control-next-icon"></span>
        </button>
        {% endif %}
      </div>
    </div>

    <div class="col-md-7">
      <div class="carousel-text">
        <h4 class="text-primary fw-bold mb-3">{{ data.photographer.FullName }}</h4>
        <p><strong>Specialization:</strong> {{ data.photographer.Specialization }}</p>
        <p><strong>Location:</strong> {{ data.photographer.Location }}</p>
        <h4 class="weddingPrice">${{ "%.2f"|format(data.photographer.PricePerHr) }}/hr</h4>

        <a href="{{ url_for('main.book_session', photographer_id=data.photographer.PhotographerID) }}" class="btn btn-outline-primary mt-3">Book a Session</a>
      </div>
    </div>
  </div>
  {% endfor %}

  {% if photographer_data|length == 0 %}
  <div class="alert alert-info">
    <h4>No Photographers Found</h4>
    <p>There are no photographers available for this category at the moment.</p>
  </div>
  {% endif %}
</div>
{% endblock %}
